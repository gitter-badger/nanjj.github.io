<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-03-18 Mon 00:30 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Publish Github Pages via Org Mode</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="JUNJIE NAN" />
<link rel="stylesheet" type="text/css" href="css/org.css" />
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="index.html"> UP </a> |
 <a accesskey="H" href="index.html"> HOME </a>
</div><div id="content">
<h1 class="title">Publish Github Pages via Org Mode</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org9ed63b7">Customization</a></li>
<li><a href="#orgd66cbbf">Get Css and Fonts</a></li>
<li><a href="#org09683c8">The Project</a></li>
</ul>
</div>
</div>
<p>
Now switched from <a href="https://jekyllrb.com/">Jekyll</a>, <a href="https://gohugo.io/">Hugo</a> to Emacs Org Publish.
</p>

<div id="outline-container-org9ed63b7" class="outline-2">
<h2 id="org9ed63b7">Customization</h2>
<div class="outline-text-2" id="text-org9ed63b7">
<p>
First we need to customize variable <code>org-publish-project-alist</code>:
</p>

<div class="org-src-container">
<pre class="src src-lisp">(<span class="org-string">"blog"</span>
 <span class="org-builtin">:base-directory</span> <span class="org-string">"."</span>
 <span class="org-builtin">:publishing-directory</span> <span class="org-string">"."</span>
 <span class="org-builtin">:base-extension</span> <span class="org-string">"org"</span>
 <span class="org-builtin">:recursive</span> t
 <span class="org-builtin">:publishing-function</span> org-html-publish-to-html
 <span class="org-builtin">:headline-levels</span> 4
 <span class="org-builtin">:auto-preamble</span> t
 <span class="org-builtin">:section-numbers</span> nil
 <span class="org-builtin">:makeindex</span> nil
 <span class="org-builtin">:html-head-include-scripts</span> nil
 <span class="org-builtin">:html-head-include-default-style</span> nil
 <span class="org-builtin">:auto-sitemap</span> t
 <span class="org-builtin">:sitemap-filename</span> <span class="org-string">"index.org"</span>
 <span class="org-builtin">:sitemap-title</span> <span class="org-string">"Thatched Cottage"</span>
 <span class="org-builtin">:sitemap-sort-files</span> anti-chronologically
 <span class="org-builtin">:sitemap-format-entry</span> org-publish-sitemap-time-entry
 <span class="org-builtin">:html-postamble</span> nil)
</pre>
</div>

<p>
My <code>sitemap-format-entry</code>, add timestamp before the sitemap entry:
</p>

<div class="org-src-container">
<pre class="src src-lisp">(<span class="org-keyword">defun</span> <span class="org-function-name">org-publish-sitemap-time-entry</span> (entry style project)
  (format <span class="org-string">"%s %s"</span>
          (format-time-string
           <span class="org-string">"[%Y-%m-%d %a %H:%s]"</span>
           (org-publish-find-date entry project))
          (org-publish-sitemap-default-entry entry style project)))
</pre>
</div>

<p>
Set <code>org-html-head</code> to(<code>customize-variable org-html-head</code>) to use my
<code>org.css</code>:
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span class="org-function-name">link</span> <span class="org-variable-name">rel</span>=<span class="org-string">"stylesheet"</span> <span class="org-variable-name">type</span>=<span class="org-string">"text/css"</span> <span class="org-variable-name">href</span>=<span class="org-string">"css/org.css"</span> /&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd66cbbf" class="outline-2">
<h2 id="orgd66cbbf">Get Css and Fonts</h2>
<div class="outline-text-2" id="text-orgd66cbbf">
<p>
I must put the fonts local because most people living here can not
access google fonts service directly.  Get the css and fonts from
Below:
</p>

<ol class="org-ol">
<li><a href="./css/org.css">org.css</a>,</li>
<li><a href="./css/fonts.css">fonts.css</a>,</li>
<li><a href="./css/DroidSans.ttf">DroidSans.ttf</a>,</li>
<li><a href="./css/DroidSansMono.ttf">DroidSansMono.ttf</a>,</li>
<li><a href="./css/DroidSerif.ttf">DroidSerif.ttf</a>.</li>
</ol>
</div>
</div>
<div id="outline-container-org09683c8" class="outline-2">
<h2 id="org09683c8">The Project</h2>
<div class="outline-text-2" id="text-org09683c8">
<pre class="example">
.
├── .git
├── .nojekyll
├── README.md
├── css
│   ├── DroidSans.ttf
│   ├── DroidSansMono.ttf
│   ├── DroidSerif.ttf
│   ├── fonts.css
│   └── org.css
├── dummynet.html
├── dummynet.org
├── growfs.html
├── growfs.org
├── hdiutil.html
├── hdiutil.org
├── index.html
├── index.org
├── org-publish.html
└── org-publish.org
</pre>
</div>
</div>
</div>
</body>
</html>
